const $promoCards=document.querySelectorAll(".promo-product-item"),$promoButtons=document.querySelectorAll(".promo-choiсe-button");function changePromo(){for(let e of $promoButtons)e.dataset.choice===event.target.dataset.choice?(e.classList.add("promo-choiсe-button_active"),e.setAttribute("aria-pressed",!0)):(e.classList.remove("promo-choiсe-button_active"),e.setAttribute("aria-pressed",!1));for(let e of $promoCards)e.dataset.type===event.target.dataset.choice?e.classList.add("promo-product-item_active"):e.classList.remove("promo-product-item_active")}for(let e of $promoButtons)e.addEventListener("focus",changePromo);const $servicesCards=document.querySelectorAll(".services-item"),$servicesButtons=document.querySelectorAll(".services-button");function changeService(){for(let e of $servicesButtons)e.dataset.servicesChoice===event.target.dataset.servicesChoice?(e.classList.add("services-button_active"),e.setAttribute("aria-pressed",!0)):(e.classList.remove("services-button_active"),e.setAttribute("aria-pressed",!1));for(let e of $servicesCards)e.dataset.servicesType===event.target.dataset.servicesChoice?e.classList.add("services-item_active"):e.classList.remove("services-item_active")}for(let e of $servicesButtons)e.addEventListener("focus",changeService);const $linkMessage=document.querySelector(".contacts-link-message"),$modalMessage=document.querySelector(".modal-message"),$closeMessage=document.querySelector(".modal-close_message"),$formMessage=document.querySelector(".message-form"),fields=[$formMessage.author,$formMessage.email,$formMessage.text];let focusElementPage=null,storageAuthor="",storageEmail="",isStoragesupport=!0;try{storageAuthor=localStorage.getItem("storageAuthor"),storageEmail=localStorage.getItem("storageEmail")}catch{isStoragesupport=!1}function openForm(e){e.preventDefault(),$formMessage.reset(),focusElementPage=document.activeElement,$modalMessage.classList.add("modal-message_active"),storageAuthor&&storageEmail?($formMessage.author.value=storageAuthor,$formMessage.email.value=storageEmail,$formMessage.text.focus()):$formMessage.author.focus()}function closeForm(e){"Escape"===e.key&&$modalMessage.classList.contains("modal-message_active")&&($modalMessage.classList.remove("modal-message_active"),$modalMessage.classList.remove("modal-message_error"),fields.forEach(e=>e.classList.remove("message-form-field_invalid")),focusElementPage.focus())}function isValidField(e){return""===e.value?(e.classList.add("message-form-field_invalid"),!1):(e.classList.remove("message-form-field_invalid"),!0)}$linkMessage.addEventListener("click",openForm),$closeMessage.addEventListener("click",()=>{$modalMessage.classList.remove("modal-message_active"),$modalMessage.classList.remove("modal-message_error"),fields.forEach(e=>e.classList.remove("message-form-field_invalid")),focusElementPage.focus()}),document.addEventListener("keydown",closeForm);for(let e of fields)e.addEventListener("input",e=>isValidField(e.target));function submitForm(e){if(fields.every(e=>isValidField(e)))isStoragesupport&&(localStorage.setItem("storageAuthor",$formMessage.author.value),localStorage.setItem("storageEmail",$formMessage.email.value)),$modalMessage.classList.remove("modal-message_active"),$modalMessage.classList.remove("modal-message_error");else{e.preventDefault(),$modalMessage.classList.remove("modal-message_error"),$modalMessage.offsetWidth=$modalMessage.offsetWidth,$modalMessage.classList.add("modal-message_error"),fields.find(e=>!isValidField(e)).focus()}}$formMessage.addEventListener("submit",submitForm);const $linkMap=document.querySelector(".contacts-link"),$modalMap=document.querySelector(".modal-map"),$closeMap=document.querySelector(".modal-close_map");$linkMap.addEventListener("click",e=>{e.preventDefault(),$modalMap.classList.add("modal-map_active")}),$closeMap.addEventListener("click",()=>{$modalMap.classList.remove("modal-map_active")}),document.addEventListener("keydown",e=>{"Escape"===e.key&&$modalMap.classList.contains("modal-map_active")&&$modalMap.classList.remove("modal-map_active")});