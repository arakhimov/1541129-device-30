const $promoCards=document.querySelectorAll(".promo-product-item"),$promoSelects=document.querySelectorAll(".promo-choise-label"),$promoFields=document.querySelectorAll(".promo-choise");function changePromo(){for(let e of $promoCards)e.dataset.type===event.target.dataset.choice?e.classList.add("promo-product-item_active"):e.classList.remove("promo-product-item_active")}for(let e of $promoSelects)e.addEventListener("click",changePromo);for(let e of $promoFields)e.addEventListener("change",changePromo);const $servicesCards=document.querySelectorAll(".services-item"),$servicesFields=document.querySelectorAll(".services-choise"),$servicesSelects=document.querySelectorAll(".services-choise-label");function changeService(){for(let e of $servicesCards)e.dataset.servicesType===event.target.dataset.servicesChoice?e.classList.add("services-item_active"):e.classList.remove("services-item_active")}for(let e of $servicesSelects)e.addEventListener("click",changeService);for(let e of $servicesFields)e.addEventListener("change",changeService);const $linkMessage=document.querySelector(".contacts-link-message"),$modalMessage=document.querySelector(".modal-message"),$closeMessage=document.querySelector(".modal-close_message"),$formMessage=document.querySelector(".message-form");let focusElementPage=null,storageAuthor="",storageEmail="",isStoragesupport=!0;try{storageAuthor=localStorage.getItem("storageAuthor"),storageEmail=localStorage.getItem("storageEmail")}catch{isStoragesupport=!1}$linkMessage.addEventListener("click",e=>{e.preventDefault(),$formMessage.reset(),focusElementPage=document.activeElement,$modalMessage.classList.add("modal-message_active"),storageAuthor&&storageEmail?($formMessage.author.value=storageAuthor,$formMessage.email.value=storageEmail,$formMessage.text.focus()):$formMessage.author.focus()}),$closeMessage.addEventListener("click",()=>{$modalMessage.classList.remove("modal-message_active"),$modalMessage.classList.remove("modal-message_error"),focusElementPage.focus()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&$modalMessage.classList.contains("modal-message_active")&&($modalMessage.classList.remove("modal-message_active"),$modalMessage.classList.remove("modal-message_error"),focusElementPage.focus())}),$formMessage.addEventListener("submit",e=>{const s=[$formMessage.author,$formMessage.email,$formMessage.text];s.every(e=>""!==e.value)?(isStoragesupport&&(localStorage.setItem("storageAuthor",$formMessage.author.value),localStorage.setItem("storageEmail",$formMessage.email.value)),$modalMessage.classList.remove("modal-message_active")):(e.preventDefault(),$modalMessage.classList.remove("modal-message_error"),$modalMessage.offsetWidth=$modalMessage.offsetWidth,$modalMessage.classList.add("modal-message_error"),s.find(e=>""===e.value).focus()),focusElementPage.focus()});const $linkMap=document.querySelector(".contacts-link"),$modalMap=document.querySelector(".modal-map"),$closeMap=document.querySelector(".modal-close_map");$linkMap.addEventListener("click",e=>{e.preventDefault(),$modalMap.classList.add("modal-map_active")}),$closeMap.addEventListener("click",()=>{$modalMap.classList.remove("modal-map_active")}),document.addEventListener("keydown",e=>{"Escape"===e.key&&$modalMap.classList.contains("modal-map_active")&&$modalMap.classList.remove("modal-map_active")});